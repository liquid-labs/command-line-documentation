{"version":3,"file":"command-line-documentation.js","sources":["../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../src/lib/command-line-documentation.mjs"],"sourcesContent":["export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","const commandLineDocumentation = ({\n    cliSpec = throw new Error(\"Missing required parameter 'cliSpec'.\"),\n    mainCommand = throw new Error(\"Missing required parameter 'mainCommand'.\"),\n    output,\n    sectionDepth = 1, \n    title = `${mainCommand} Command Reference`\n  }) => {\n  let content = ''\n  const depth = sectionDepth\n  const { mainOptions, commands } = cliSpec\n\n  content = sectionMark(depth) + ' ' + title + '\\n\\n' //  section/page title\n\n  content += documentUsage({ depth, mainCommand, mainOptions })\n\n  const mainOptionsHeader = commands === undefined ? 'Options' : 'Main options'\n  content += documentOptions({ depth, header: mainOptionsHeader, allOptions: mainOptions })\n\n  return content\n}\n\nconst documentOptions = ({ depth, header, allOptions }) => {\n  const { options } = separateOptions(allOptions)\n\n  let content = sectionMark(depth + 1) + ' ' + header + '\\n\\n'\n\n  content += '|Option|Description|\\n'\n  console.log(options) // DEBUG\n  for (const { alias, name, description } of options) {\n    console.log('name:', name) // DEBUG\n    content += '|' + name\n    if (alias !== undefined) {\n      content += ', ' + alias\n    }\n    content += '|' + description + '|\\n'\n  }\n\n  content += '\\n'\n\n  return content\n}\n\nconst documentUsage = ({ depth, mainCommand, mainOptions }) => {\n  let usage = sectionMark(depth + 1) + ' Usage\\n\\n'\n\n  usage += '`' + mainCommand\n\n  const { defaultOption, options } = separateOptions(mainOptions)\n  if (options.length > 0) {\n    usage += ' <options>'\n  }\n  if (defaultOption !== undefined) {\n    const { required, name } = defaultOption\n    usage += ' ' + (required === true ? '[' : '<') + name + (required === true ? ']' : '>')\n  }\n  usage += '`\\n\\n'\n\n  return usage\n}\n\nconst sectionMark = (depth) =>  '#'.repeat(depth)\n\nconst separateOptions = (allOptions) => {\n  const defaultOptionIndex = allOptions.findIndex(({ defaultOption }) => defaultOption === true)\n\n  const defaultOption = defaultOptionIndex === -1 ? undefined : allOptions[defaultOptionIndex]\n  console.log('defaultOptionIndex:', defaultOptionIndex) // DEBUG\n\n  const options = [...allOptions]\n  if (defaultOptionIndex !== -1) {\n    options.splice(defaultOptionIndex, 1)\n  }\n\n  console.log()\n\n  return { defaultOption, options }\n}\n\nexport { commandLineDocumentation }"],"names":["_arrayLikeToArray","arr","len","length","i","arr2","Array","_toConsumableArray","isArray","arrayLikeToArray","arrayWithoutHoles","iter","Symbol","iterator","from","iterableToArray","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","test","unsupportedIterableToArray","TypeError","nonIterableSpread","documentOptions","_ref2","depth","header","allOptions","options","separateOptions","content","sectionMark","console","log","_step","_iterator","_createForOfIteratorHelper","s","done","_step$value","value","alias","description","undefined","err","e","f","documentUsage","_ref3","mainCommand","mainOptions","usage","_separateOptions2","defaultOption","required","repeat","defaultOptionIndex","findIndex","_ref4","splice","_ref","_ref$cliSpec","cliSpec","Error","_ref$mainCommand","output","_ref$sectionDepth","sectionDepth","_ref$title","title","concat","commands"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}